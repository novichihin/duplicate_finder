# Duplicate Finder App

Этот проект предназначен для поиска дублирующихся и схожих изображений в фотоархивах. Приложение поддерживает графический интерфейс на основе Tkinter, предоставляет возможность предпросмотра изображений и позволяет создавать отчет о дубликатах и схожих файлах.

## Основные возможности

- Поиск точных дубликатов файлов на основе их хеша (MD5).
- Поиск схожих изображений на основе перцептивного хеша (imagehash).
- Обработка изображений в различных форматах (JPEG, PNG, TIFF, RAW и т.д.).
- Поддержка глубокой иерархии папок для поиска дубликатов и схожих файлов.
- Возможность создания отчета в виде таблицы.
- Графический интерфейс с предпросмотром дубликатов и схожих изображений.
- Возможность работы через Docker для лёгкого развертывания.

### Описание файлов:

- `main.py` — основной файл для запуска приложения, содержит точку входа.
- `duplicate_finder.py` — модуль, который реализует логику поиска дубликатов и схожих изображений.
- `image_processing.py` — модуль, отвечающий за обработку изображений (получение хеша, повороты, зеркальные отражения и т.д.).
- `ui.py` — модуль с графическим интерфейсом на основе Tkinter для работы с пользователем.
- `utils.py` — вспомогательные функции, такие как поиск всех файлов в папках и подпапках.
- `Dockerfile` — файл с инструкциями для сборки Docker-образа.
- `docker-compose.yml` — файл для управления запуском контейнеров с использованием Docker Compose (опционально).
- `requirements.txt` — файл со списком зависимостей проекта.

## Установка и запуск

### 1. Локальная установка (без Docker)

1. Склонируйте репозиторий:

    ```bash
    git clone https://github.com/novichihin/duplicate_finder.git
    cd duplicate_finder
    ```

2. Установите зависимости:

    ```bash
    pip install -r requirements.txt
    ```

3. Запустите приложение:

    ```bash
    python main.py
    ```

### 2. Установка с Docker

#### Сборка Docker-образа

1. Убедитесь, что у вас установлен Docker.

2. Склонируйте репозиторий:

    ```bash
    git clone https://github.com/novichihin/duplicate_finder.git
    cd duplicate_finder
    ```

3. Соберите Docker-образ:

    ```bash
    docker build -t duplicate_finder .
    ```

4. Запустите контейнер с графическим интерфейсом через X11:

    ```bash
    docker run -it \
        --rm \
        -e DISPLAY=$DISPLAY \
        -v /tmp/.X11-unix:/tmp/.X11-unix \
        duplicate_finder
    ```

#### Использование Docker Compose

1. Если вы предпочитаете использовать Docker Compose, отредактируйте `docker-compose.yml` (если нужно) и запустите:

    ```bash
    docker-compose up --build
    ```

### 3. Взаимодействие с приложением

1. После запуска приложения откроется окно графического интерфейса. 
   
2. Выберите основную папку, в которой нужно искать дубликаты и схожие файлы, нажав кнопку "Открыть папку".

3. Нажмите кнопку "Найти дубликаты", чтобы начать процесс поиска.

4. По завершении поиска в главном окне отобразится таблица с найденными дубликатами и схожими изображениями. Вы также можете просмотреть изображения в окне предпросмотра.

5. Отчет будет сохранен в файл `duplicates_report.txt` в корневой директории проекта.

## Используемые технологии и библиотеки

- Python 3.10
- Tkinter — графическая библиотека для создания GUI.
- Pillow — библиотека для обработки изображений.
- imagehash — для вычисления хешей изображений (поиск схожих файлов).
- Docker — для контейнеризации приложения.
- Docker Compose — для упрощения управления многоконтейнерными приложениями (если необходимо).

## Переменные окружения

Если вы используете Docker для запуска графического интерфейса, убедитесь, что переданы следующие переменные окружения:

- `DISPLAY` — для корректного отображения окна приложения через X11.
- `QT_X11_NO_MITSHM=1` — для совместимости с некоторыми системами.
